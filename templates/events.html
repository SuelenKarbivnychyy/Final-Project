{% extends 'base.html' %}

{% block title %} All Events {% endblock %}

{% block body %}

<h1 class="text-center mt-5"> Events  </h1>

<style>
table, th, td {
    border: 1px solid black;
    border-collapse: collapse;    
}
</style>


<main role="main">
  <div class="container">    
    <div class="row">
        <div class="card-group">
        {% for event in events %}               
          <div class="card" style_old="width: 18rem;">
            <div class="card-header" name="link_to_details" event_id="{{event.id}}">             
              <img src="/static/css/card2.jpg" class="card-img-top" alt="img">
            </div>
            <div class="card-body">
              <h5 class="card-title">{{event.name}}</h5>
                <p class="card-text">{{event.description}}</p>
            </div>
            <div class="card-footer">
              <ul class="list-group list-group-flush">
                <li class="list-group-item">number of attendance: {{event.attendances|length}} </li>
                <li class="list-group-item">rate: {{rate.get(event.id, "Event has no rate yet")}}</li>
                <li class="list-group-item">
                  <a href="https://calendar.google.com/calendar/render?action=TEMPLATE&text={{event.name}}&details={{event.description}}&dates={{event.start_date_time.strftime('%Y%m%dT%H%M%S')}}/{{event.end_date_time.strftime('%Y%m%dT%H%M%S')}} &location={{event.location.address}}, {{event.location.city}} - {{event.location.zipcode}}">Add to Google Calendar</a>
                </li>                
              </ul>
              {% if event.id in attendances.keys() %} 
                <button class="bg-warning text-white" type="submit" value="{{event.id}}" name="sign_out">Sign out</button>
                <div class="fb-share-button" data-href="http://127.0.0.1:5000/events/{{event.id}}" data-layout="button" data-size="small"><a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2F127.0.0.1%3A5000%2Fevents%2F1&amp;src=sdkpreparse" class="fb-xfbml-parse-ignore">Share</a></div>
              {% else %}
                <button class="bg-primary text-white" type="submit" value="{{event.id}}" name="sign_up">Sign in</button>
                <div class="fb-share-button" data-href="http://127.0.0.1:5000/events/{{event.id}}" data-layout="button" data-size="small"><a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2F127.0.0.1%3A5000%2Fevents%2F1&amp;src=sdkpreparse" class="fb-xfbml-parse-ignore">Share</a></div>
            {% endif %} 
            </div>        
          </div>                
        {% endfor %}
        </div>
    </div>        
  </div>  
  </main>  


<script src="/static/event_sign_in.js"></script>       <!-- importing javascript file -->
<script src="/static/event_details.js"></script>

{% endblock %}


{% block js %}	
{% endblock %}
