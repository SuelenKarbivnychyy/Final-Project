{% extends 'base.html' %}

{% block title %} Edit Event {% endblock %}

{% block body %}

<div class="container mt-2">
    <h1 class="text-center m-1 header-text">Edit / Add event</h1>
    <div class="row">
        <form  action = "/update_event" method="POST">
            
            <div class="col-md-12  bg-admin-panel" >        
                <div class="row pb-4 px-5"> 
                    <input type="hidden" name="event_id" value="{{event.id}}">
                    <label for="venue_select" class="form-label">Select the Venue:</label>
                    <select class="form-select" name="venue" id="venue"> 
                        
                    {% if event.location != None %}
                        <option value="{{event.location.id}}">{{event.location.venue_name}}</option>
                    {% endif %}               
                
                    {% for venue in locations_inf %}           
                        <option value="{{venue.id}}">{{venue.venue_name}}</option>
                    {% endfor %}
                    </select>  
                </div>

                <div class="row pb-4 px-5">
                    <label for="event_name">Event name:</label>
                    <input class="form-control" type="text" name="event_name" id="event_name_input" value="{{event.name}}"></input>
                </div>

                <div class="row pb-4 px-5">    
                    <label for="event_type" class="form-label">Select the Event type:</label>
                    <select class="form-select" name="type" id="event_title">
                    
                    {%if event.event_type != None %}
                        <option value="{{event.event_type.id}}">{{event.event_type.name}}</option>
                    {% endif %}    
                
                    {% for e_type in events_type_inf %}    
                        <option value={{e_type.id}}>{{e_type.name}}</option>
                    {% endfor %}
                    </select>                
                </div> 

                <div class="row pb-4 px-5">
                    <label for="date_input">Event start Date and Time:</label>
                    <input class="form-select" type="datetime-local" name="event_start_date" id = "date_start_input" value="{{event.start_date_time.strftime('%Y-%m-%dT%H:%M')}}">  
                    
                </div>

                <div class="row pb-4 px-5">
                    <label for="date_input">Event end time:</label>
                    <input class="form-select" type="datetime-local" name="event_end_date" id = "date_end_input" value="{{event.end_date_time.strftime('%Y-%m-%dT%H:%M')}}">            
                </div>

                <div class="row pb-4 px-5">
                    <label for="description_input">Event description:</label>
                    <textarea class="form-control" type="text" name="description" id="description_input" value="{{event.description}}">{{event.description}}</textarea>
                </div>     

                <div class="row pb-4 mx-4">
                    <div class="col-4">
                        <label for="price_input">Event price:</label>    
                        <input class="form-control" type="number" name="price" id="price_input" value="{{event.price}}">                   
                    </div>
                    
                            
                </div>            
        
                <div class="row pb-4 mx-4">
                    <div class="col">
                        <input type="submit" value="Save" class="btn btn-primary"/>
                        <button onclick="window.location.href ='/adm'"  class="btn btn-warning" id="cancel">Cancel</button>
                    </div>
                </div>
            </div>
        </form>    
    </div>
</div> 

<script src= "/static/edit_create_event.js"></script>
{% endblock %}